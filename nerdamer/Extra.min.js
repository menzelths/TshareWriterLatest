"undefined"!==typeof module&&(nerdamer=require("./nerdamer.core.js"),require("./Calculus"));
(function(){var d=nerdamer.getCore(),e=d.PARSER,h=d.Symbol,l=d.Utils.format,p=d.Utils.isVector,q=d.groups.S,r=d.groups.CB,t=d.groups.FN;d.Settings.Laplace_integration_depth=40;var b=d.Extra={version:"1.2.0",LaPlace:{transform:function(a,c,g){c=c.toString();a=h.unwrapSQRT(a,!0);var k=a.stripVar(c),n=a.group;a=e.divide(a,k.clone());if(a.isConstant()||!a.contains(c,!0))var f=e.parse(l("({0})/({1})",a,g));else if(n===q&&d.Utils.isInt(a.power))f=e.parse(l("factorial({0})/({1})^({0}+1)",String(a.power),
g));else if(a.group===q&&a.power.equals(.5))f=e.parse(l("sqrt(pi)/(2*({0})^(3/2))",g));else if(a.isComposite())f=new h(0),a.each(function(a){f=e.add(f,b.LaPlace.transform(a,c,g))},!0);else if(!a.isE()||a.power.group!==q&&a.power.group!==r)if(n=["sin","cos","sinh","cosh"],a.group!==t||-1===n.indexOf(a.fname)||a.args[0].group!==q&&a.args[0].group!==r){if(n=d.Settings.integration_depth<d.Settings.Laplace_integration_depth){var m=d.Settings.integration_depth;d.Settings.integration_depth=40}d.Utils.block("PARSE2NUMBER",
function(){var b=c,k=a.sub(c,b),k=e.parse("e^(-"+g+"*"+b+")*"+k);f=d.Calculus.integrate(k,b);f.hasIntegral()&&e.error("Unable to compute transform");f=f.sub(c,0);f=e.expand(e.multiply(f,new h(-1)));f=f.sub(b,c)},!1);f=d.Utils.block("PARSE2NUMBER",function(){return e.parse(f)},!0);n&&(d.Settings.integration_depth=m)}else switch(m=a.args[0].stripVar(c),a.fname){case "sin":f=e.parse(l("({0})/(({1})^2+({0})^2)",m,g));break;case "cos":f=e.parse(l("({1})/(({1})^2+({0})^2)",m,g));break;case "sinh":f=e.parse(l("({0})/(({1})^2-({0})^2)",
m,g));break;case "cosh":f=e.parse(l("({1})/(({1})^2-({0})^2)",m,g))}else m=a.power.stripVar(c),f=e.parse(l("1/(({1})-({0}))",m,g));return e.multiply(f,k)}},Statistics:{frequencyMap:function(a){for(var c={},b=0,e=a.length;b<e;b++){var d=a[b].toString();c[d]||(c[d]=0);c[d]++}return c},sort:function(a){return a.sort(function(a,b){a.isConstant()&&b.isConstant()||e.error("Unable to sort! All values must be numeric");return a.multiplier.subtract(b.multiplier)})},count:function(a){return new h(a.length)},
sum:function(a,b){for(var c=new h(0),d=0,n=a.length;d<n;d++)var f=a[d].clone(),c=b?e.add(e.pow(e.subtract(f,b.clone()),new h(2)),c):e.add(f,c);return c},mean:function(){var a=[].slice.call(arguments);return p(a[0])?b.Statistics.mean.apply(this,a[0].elements):e.divide(b.Statistics.sum(a),b.Statistics.count(a))},median:function(){var a=[].slice.call(arguments);if(p(a[0]))return b.Statistics.median.apply(this,a[0].elements);try{var c=b.Statistics.sort(a),g=a.length;if(d.Utils.even(g)){g/=2;var k=b.Statistics.mean(c[g-
1],c[g])}else k=c[Math.floor(g/2)]}catch(n){k=e.symfunction("median",a)}return k},mode:function(){var a=[].slice.call(arguments);if(p(a[0]))return b.Statistics.mode.apply(this,a[0].elements);var c=b.Statistics.frequencyMap(a),d=[],k=0,h=0,f,m;for(m in c){var l=c[m],q=0===k;q&&(f=l);if(q||l>d[1])d[0]=m,d[1]=l;l===f&&h++;k++}return h===k?e.symfunction("mode",a):e.parse(d[0])},gVariance:function(a,c){var d=b.Statistics.mean.apply(b.Statistics,c);c=b.Statistics.sum(c,d);return e.multiply(a,c)},variance:function(){var a=
[].slice.call(arguments);if(p(a[0]))return b.Statistics.variance.apply(this,a[0].elements);var c=e.divide(new h(1),b.Statistics.count(a));return b.Statistics.gVariance(c,a)},sampleVariance:function(){var a=[].slice.call(arguments);if(p(a[0]))return b.Statistics.sampleVariance.apply(this,a[0].elements);var c=e.divide(new h(1),e.subtract(b.Statistics.count(a),new h(1)));return b.Statistics.gVariance(c,a)},standardDeviation:function(){var a=[].slice.call(arguments);return p(a[0])?b.Statistics.standardDeviation.apply(this,
a[0].elements):e.pow(b.Statistics.variance.apply(b.Statistics,a),new h(.5))},sampleStandardDeviation:function(){var a=[].slice.call(arguments);return p(a[0])?b.Statistics.sampleStandardDeviation.apply(this,a[0].elements):e.pow(b.Statistics.sampleVariance.apply(b.Statistics,a),new h(.5))},zScore:function(a,b,d){return e.divide(e.subtract(a,b),d)}},Units:{table:{foot:"12 inch",meter:"100 cm",decimeter:"10 cm"}}};nerdamer.register([{name:"laplace",visible:!0,numargs:3,build:function(){return b.LaPlace.transform}},
{name:"mean",visible:!0,numargs:-1,build:function(){return b.Statistics.mean}},{name:"median",visible:!0,numargs:-1,build:function(){return b.Statistics.median}},{name:"mode",visible:!0,numargs:-1,build:function(){return b.Statistics.mode}},{name:"smpvar",visible:!0,numargs:-1,build:function(){return b.Statistics.sampleVariance}},{name:"variance",visible:!0,numargs:-1,build:function(){return b.Statistics.variance}},{name:"smpstdev",visible:!0,numargs:-1,build:function(){return b.Statistics.sampleStandardDeviation}},
{name:"stdev",visible:!0,numargs:-1,build:function(){return b.Statistics.standardDeviation}},{name:"zscore",visible:!0,numargs:3,build:function(){return b.Statistics.zScore}}]);nerdamer.api()})();
