var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,f){if(b){c=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var r=a[f];r in c||(c[r]={});c=c[r]}a=a[a.length-1];f=c[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Number.EPSILON",function(a){return Math.pow(2,-52)},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,f={next:function(){if(c<a.length){var r=c++;return{value:b(r,a[r]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6-impl","es3");
"undefined"!==typeof module&&(nerdamer=require("./nerdamer.core.js"),require("./Calculus.js"),require("./Algebra.js"));
(function(){function a(b,c){if(c.isConstant()&&b.isConstant()&&!b.equals(c))throw Error(b.toString()+" does not equal "+c.toString());this.LHS=b;this.RHS=c}var b=nerdamer.getCore(),c=b.PARSER,f=b.Algebra,r=b.Calculus,D=r.integration.decompose_arg,P=b.Utils.remove,y=b.Utils.format,E=b.Utils.build,l=b.Symbol,J=b.Utils.isSymbol,w=b.Utils.variables,F=b.groups.S,K=b.groups.PL,G=b.groups.CB,Q=b.groups.CP,L=b.groups.FN,M=b.Utils.isArray;b.Solve={version:"1.2.2",solve:function(c,e){c=B(c,String(e));return new b.Vector(c)}};
b.Settings.solve_radius=500;b.Settings.roots_per_side=5;b.Settings.make_pi_conversions=!0;b.Symbol.prototype.hasTrig=function(){return this.containsFunction("cos sin tan cot csc sec".split(" "))};b.Symbol.prototype.hasNegativeTerms=function(){if(this.isComposite())for(var c in this.symbols){var b=this.symbols[c];if(b.group===K&&b.hasNegativeTerms()||this.symbols[c].power.lessThan(0))return!0}return!1};a.prototype={toString:function(){return this.LHS.toString()+"="+this.RHS.toString()},text:function(c){return this.LHS.text(c)+
"="+this.RHS.text(c)},toLHS:function(){return c.subtract(this.LHS.clone(),this.RHS.clone())},clone:function(){return new a(this.LHS.clone(),this.RHS.clone())},sub:function(c,b){var d=this.clone();d.LHS=d.LHS.sub(c.clone(),b.clone());d.RHS=d.RHS.sub(c.clone(),b.clone());return d},latex:function(c){return[this.LHS.latex(c),this.RHS.latex(c)].join("=")}};c.equals=function(c,b){return new a(c,b)};var N=function(b){if(b instanceof a)return b.toLHS();var e=b.split("=");void 0===e[1]&&(e[1]="0");b=c.parse(e[0]);
e=c.parse(e[1]);return c.subtract(b,e)},R=function(a,e){nerdamer.clearVars();for(var d=0;d<a.length;d++)a[d]=N(a[d]);var t=a.length,v=new b.Matrix,n=new b.Matrix,x=!1;if("undefined"===typeof e){f.allLinear(a)||b.err("System must contain all linear equations!");var g=w(a[0]);for(d=1;d<t;d++)g=g.concat(w(a[d]));g=b.Utils.arrayUnique(g).sort();for(d=0;d<t;d++){var k=a[d];for(var m=0;m<t;m++)e=k.symbols[g[m]],v.set(d,m,e?e.multiplier:0);k=k.symbols["#"];n.set(d,0,new l(k?-k.multiplier:0))}}else for(g=
e,x=!0,d=0;d<t;d++){n.set(d,0,new l(0));k=c.expand(a[d]).collectSymbols();for(m=0;m<e.length;m++){v.set(d,m,new l(0));for(var z=e[m],p=0;p<k.length;p++){for(var u=k[p],r=!1,A=0;A<e.length;A++)u.contains(e[A])&&(r&&b.err("Multiple variables found for term "+u),r=!0);u.contains(z)&&(u=D(P(k,p),z),v.set(d,m,c.add(v.get(d,m),u[0])))}}for(p=0;p<k.length;p++)n.set(d,0,c.add(n.get(d,0),k[p]))}var v=v.invert(),h=[];v.multiply(n).each(function(b,a){h.push([g[a],(x?c.expand(b):b).valueOf()])});return h},C=
function(b,a,d,f){f="-"===f?"subtract":"add";b=c.subtract(c.pow(a.clone(),l(2)),c.multiply(c.multiply(d.clone(),b.clone()),l(4)));b=c.pow(b,l(.5));return c.divide(c[f](a.clone().negate(),b),c.multiply(new l(2),d.clone()))},O=function(a,e,d,f){var t=f.text(),n=d.text(),l=e.text(),g=a.text(),k=c.parse(y("({1})^2-3*({0})*({2})",t,n,l)),m=c.parse(y("((2*({1})^3-9*({0})*({1})*({2})+27*({0})^2*({3}))^2-4*(({1})^2-3*({0})*({2}))^3)^(1/2)",t,n,l,g)),r=c.parse(y("((1/2)*(({4})+2*({1})^3-9*({0})*({1})*({2})+27*({0})^2*({3})))^(1/3)",
t,n,l,g,m)),p={};w(r).map(function(b){p[b]=1});var u=b.Utils.block("PARSE2NUMBER",function(){return c.parse(r,p)});0===Number(k)&&0===Number(u)&&(r=c.parse(y("((1/2)*(-({4})+2*({1})^3-9*({0})*({1})*({2})+27*({0})^2*({3})))^(1/3)",t,n,l,g,m)));return["-(b/(3*a))-C/(3*a)-(((b^2-3*a*c))/(3*a*C))","-(b/(3*a))+(C*(1+i*sqrt(3)))/(6*a)+((1-i*sqrt(3))*(b^2-3*a*c))/(6*a*C)".replace(/i/g,b.Settings.IMAGINARY),"-(b/(3*a))+(C*(1-i*sqrt(3)))/(6*a)+((1+i*sqrt(3))*(b^2-3*a*c))/(6*a*C)".replace(/i/g,b.Settings.IMAGINARY)].map(function(b,
g){return c.parse(b,{a:f.clone(),b:d.clone(),c:e.clone(),d:a.clone(),C:r.clone()})})},B=function(a,e,d){e=e||"x";if(M(a))return R.apply(void 0,arguments);d=d||[];if(a.group===F&&a.contains(e))return d.push(new l(0)),d;if(a.group===G){var t=String(e);a.each(function(b){b.contains(t)&&B(b,e,d)});return d}var v={},n=function(a,e){var q=J(a);if(!(void 0===a||"number"===typeof a&&isNaN(a)))if(M(a))d=d.concat(a);else if("null"!==a.valueOf()){q||(a=c.parse(a));if(b.Settings.make_pi_conversions&&e){e=c.divide(a.clone(),
new l(Math.PI));var q=e.multiplier,g=Math.abs(q.den);10>Math.abs(q.num)&&10>g&&(a=c.multiply(e,new l("pi")))}e=a.toString();v[e]||d.push(a);v[e]=!0}};var x=function(a){var c=a.hasTrig(),q=E(a),e=Math.round(q(0)),g=q(e),f=g/Math.abs(g),g=[],l=b.Settings.roots_per_side,t=2*l+1;g.push(Math.floor(e/2));for(var h=e;h<b.Settings.solve_radius;h++){var k=q(h);var m=k/Math.abs(k);if(isNaN(k)||!isFinite(k)||g.length>l)break;m!==f&&g.push((h-1)/2);f=m}for(h=e-1;h>-b.Settings.solve_radius;h--){k=q(h);m=k/Math.abs(k);
if(isNaN(k)||!isFinite(k)||g.length>t)break;m!==f&&g.push((h-1)/2);f=m}q=g.length;e=E(a.clone());a=E(r.diff(a.clone()));for(m=0;m<q;m++){a:{var l=e,t=a,h=0,p=g[m];do{h++;if(200<h){k=void 0;break a}k=p-l(p)/t(p);f=Math.abs(k-p);p=k}while(f>Number.EPSILON)}n(k,c)}d.sort()};var g=b.Utils.isSymbol(a)?a:N(a),k=b.Utils.variables(g),m=k.length;if(g.group===F||g.group===G&&g.contains(e))return[new l(0)];var z={},p=function(a){if(a.symbols)for(var d in a.symbols){var q=a.symbols[d],g=D(q,e),k=g[1].fname===
b.Settings.SQRT,h=l.unwrapSQRT(g[1]),f=h.power.clone();if(!J(f))if(f.den.gt(1)){if(k)return a=c.subtract(a,q.clone()),a=c.add(a,c.multiply(g[0],h)),p(a);q=z[f.den];z[f.den]=q?q++:1}else if(-1===f.sign()){var m=c.parse(e+"^"+Math.abs(f));a.each(function(b,q){b.contains(e)&&(a.symbols[q]=c.multiply(b,m.clone()))});z={};return p(c.parse(a))}}return a},u=function(a,d){d=d||new l(0);a=l.unwrapSQRT(c.expand(a));var g=0,f=a.length;if(a.group===Q&&a.contains(e)&&a.isLinear()){a.distributeMultiplier();var h=
new l(0);a.each(function(a){a.contains(e)?(g++,h=c.add(h,a.clone())):d=c.subtract(d,a.clone())});a=h;return g!==f?u(a,d):[a,d]}if(a.group===G&&a.contains(e)&&a.isLinear()){a.multiplier.lessThan(0)&&(a.multiplier=a.multiplier.multiply(new b.Frac(-1)),d.multiplier=d.multiplier.multiply(new b.Frac(-1)));if(d.equals(0))return new l(0);h=new l(1);a.each(function(a){a.contains(e)?h=c.multiply(h,a.clone()):d=c.divide(d,a.clone())});return u(h,d)}if(!a.isLinear()&&a.contains(e))return f=c.parse(a.power.clone().invert()),
a=c.pow(a,f.clone()),d=c.pow(c.expand(d),f.clone()),u(a,d);if(a.group===L||a.group===F||a.group===K)return[a,d]},g=p(g),w=b.Utils.keys(z);if(1===w.length){var A=w[0];g.each(function(a,d){if(a.contains(e)){a=D(a,e);var f=a[1],h=f.power;h.den.gt(1)&&(f.power=h.multiply(new b.Frac(A)),g.symbols[d]=c.multiply(f,a[0]))}});g=c.parse(g)}if(1===m)if(g.isPoly(!0)){var h=b.Utils.getCoeffs(g,e);x=h.length-1;k[0]===e&&(1===x?n(c.divide(h[0],h[1].negate())):2===x?(n(c.expand(C.apply(void 0,h))),h.push("-"),n(c.expand(C.apply(void 0,
h)))):3===x?n(O.apply(void 0,h)):f.proots(g).map(n))}else x(g);else if(!g.hasFunc(e)&&g.isComposite())try{switch(h=b.Utils.getCoeffs(g,e),h.length-1){case 1:n(c.divide(h[0],h[1].negate()));break;case 2:n(C.apply(void 0,h));h.push("-");n(C.apply(void 0,h));break;case 3:n(O.apply(void 0,h))}}catch(q){}else try{var y=u(g),H=y[0],I=y[1];H.group===L&&("abs"===H.fname?(d.push(I.clone()),d.push(I.negate())):d.push(c.subtract(H,I)))}catch(q){}A&&(d=d.map(function(a){return c.pow(a,new l(A))}));return d};
b.Expression.prototype.solveFor=function(a){return B(b.Utils.isSymbol(this.symbol)?this.symbol:this.symbol.toLHS(),a).map(function(a){return new b.Expression(a)})};b.Expression.prototype.expand=function(){if(this.symbol instanceof a){var f=this.symbol.clone();f.RHS=c.expand(f.RHS);f.LHS=c.expand(f.LHS);return new b.Expression(f)}return new b.Expression(c.expand(this.symbol))};b.Expression.prototype.variables=function(){return this.symbol instanceof a?b.Utils.arrayUnique(w(this.symbol.LHS).concat(w(this.symbol.RHS))):
w(this.symbol)};var S=function(a,b){return c.equals(a,b)};nerdamer.register([{name:"solveEquations",parent:"nerdamer",visible:!0,build:function(){return B}},{name:"solve",parent:"Solve",numargs:2,visible:!0,build:function(){return b.Solve.solve}},{name:"setEquation",parent:"Solve",visible:!0,build:function(){return S}}]);nerdamer.api()})();
