var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,h,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,h,b){a!=Array.prototype&&a!=Object.prototype&&(a[h]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,h,b,g){if(h){b=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var p=a[g];p in b||(b[p]={});b=b[p]}a=a[a.length-1];g=b[a];h=h(g);h!=g&&null!=h&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,b){var g=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var h=g.length,u=a.length;b=Math.max(0,Math.min(b|0,g.length));for(var x=0;x<u&&b<h;)if(g[b++]!=a[x++])return!1;return x>=u}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,b){var g=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===b&&(b=g.length);b=Math.max(0,Math.min(b|0,g.length));for(var h=a.length;0<h&&0<b;)if(g[--b]!=a[--h])return!1;return 0>=h}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,b,g){var h=this.length||0;0>b&&(b=Math.max(0,h+b));if(null==g||g>h)g=h;g=Number(g);0>g&&(g=Math.max(0,h+g));for(b=Number(b||0);b<g;b++)this[b]=a;return this}},"es6-impl","es3");$jscomp.findInternal=function(a,h,b){a instanceof String&&(a=String(a));for(var g=a.length,p=0;p<g;p++){var u=a[p];if(h.call(b,u,p,a))return{i:p,v:u}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var h=0;return $jscomp.iteratorPrototype(function(){return h<a.length?{done:!1,value:a[h++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,h){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var b=0,g={next:function(){if(b<a.length){var p=b++;return{value:h(p,a[p]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
var Textabschnitt=new function(){function a(a,b){this.x=a;this.y=b}function h(a,b){var e=$(b).prop("selectionStart"),f=$(b).prop("selectionEnd"),k=$(b).val(),e=k.substring(0,e),f=k.substring(f,k.length);$(b).val(e+a+f)}function b(a){for(var b="",e=0;e<a.length;e++)var f="00"+a.charCodeAt(e).toString(16),b=b+f.substr(f.length-2);return b}function g(a){for(var b="",e=0;e<a.length;e+=2)b+=String.fromCharCode(parseInt(a.substr(e,2),16));return b}function p(k,h){if(null==k||void 0==k)k="";res=k.replace(/\$\$\$(.|\n)*?\$\$\$/g,
function(a){return-1!=a.substring(3,a.length-3).indexOf("\n")?"Hex11 "+b(AMTparseAMtoTeX(a.substring(3,a.length-3)))+"Hex12":"Hex22 "+b(AMTparseAMtoTeX(a.substring(3,a.length-3)))+" Hex23"});res=res.replace(/\!\!\!(.|\n)*?\!\!\!/g,function(a){a=a.trim().split(" ").join("");var l=["NerdTerm12","NerdTerm2"];return l[0]+" "+a.substring(3,a.length-3)+" "+l[1]});res=res.replace(/\!\ppp(.|\n)*?\!\ppp/g,function(a){return a=a.replace(/\!\!(.|\n)*?\!\!/g,function(a){a=a.trim().split(" ").join("");var l=["NerdTerm12",
"NerdTerm2"];return l[0]+" "+a.substring(2,a.length-2)+" "+l[1]})});res=res.replace(/\$\$(.|\n)*?\$\$/g,function(a){return a=a.replace(/\!\!(.|\n)*?\!\!/g,function(a){a=a.trim().split(" ").join("");var l=["NerdTerm11","NerdTerm2"];a.substring(2,a.length-2);return l[0]+" "+a.substring(2,a.length-2)+" "+l[1]})});res=res.replace(/\!\!(.|\n)*?\!\!/g,function(a){a=a.trim().split(" ").join("");var l=["NerdTerm10","NerdTerm2"];return l[0]+" "+a.substring(2,a.length-2)+" "+l[1]});res=res.replace(/NerdTerm1(.|\n)*?NerdTerm2/g,
function(a){var f;if(-1!=a.substring(9,a.length-9).indexOf("\n"))return a=a.substring(10,a.length-9).trim(),a.split("\n").map(function(a){var e=!0;a=a.trim();a.startsWith("!")&&(e=!1,a=a.substr(1).trim());var f=!1,d=!1;a.startsWith("#")&&(a=a.substring(1).trim(),f=!0);a.endsWith("#")&&(a=a.substr(0,a.length-1).trim(),d=!0);f=y(a,f,d,!0);if(1==e)return"$$\n"+f+"\n$$"}).join("\n");a=a.substring(9,a.length-9).trim();if(a.startsWith("0")||a.startsWith("1")){var b=["",""];a.startsWith("0")&&(b=["$$ ",
" $$"]);a=a.substr(1).trim();var e=f=!1;a.startsWith("#")&&(a=a.substr(1).trim(),f=!0);a.endsWith("#")&&(a=a.substring(0,a.length-1).trim(),e=!0);return b[0]+y(a,f,e,!0)+b[1]}if(a.startsWith("2"))return a=a.substr(1).trim(),e=y(a,f,e,!1),nerdamer(e).evaluate().text()});var e=[-5,5],f=[-5,5],p=[1,1],v=[1,1],A=[1E3,1E3];res=res.replace(/\!ppp(.|\n)*?\!ppp/g,function(b){var k="#000000",l=5,g=0,h="",B="";$("body").append("<canvas id='plotcanvas' style='display:none' width='2000px' height='2000px'></canvas>");
var z=$("#plotcanvas")[0],d=$("#plotcanvas")[0].getContext("2d");d.font="40px Sans-Serif";d.setLineDash([]);b.split("\n").map(function(b){function m(a){return(a-parseFloat(e[0]))/(parseFloat(e[1])-parseFloat(e[0]))*A[0]}function n(a){return A[1]-(a-parseFloat(f[0]))*A[1]/(parseFloat(f[1])-parseFloat(f[0]))}function u(a,b,c,f,e,g){e=void 0===e?20:e;g=void 0===g?8:g;d.strokeStyle=k;d.lineCap="round";d.lineWidth=""+l;d.beginPath();d.moveTo(a,b);d.lineTo(c,f);a=c-a;b=f-b;var h=Math.sqrt(a*a+b*b);a/=h;
b/=h;d.moveTo(c-e*a+g*b,f-e*b-g*a);d.lineTo(c,f);d.moveTo(c-e*a-g*b,f-e*b+g*a);d.lineTo(c,f);d.stroke()}function w(){d.strokeStyle=k;d.lineCap="round";d.lineWidth=""+l;var a=1;2<e.length&&(a=parseFloat(e[2]));if(0<=a&&(u(m(parseFloat(e[0])),n(0),m(parseFloat(e[1])),n(0)),d.fillStyle=k,0!=a))for(var b=a*parseInt((parseFloat(e[0])-1)/a);b<parseFloat(e[1]);b+=a)d.beginPath(),d.moveTo(m(b),n(0)-10),d.lineTo(m(b),n(0)+10),0!=b&&d.fillText(""+b,m(b)-5,n(0)+55),d.stroke()}function x(a,b,c,d,f,e){b-=d/2;
c-=f/2;var k=d/2*.5522848,l=f/2*.5522848,g=b+d,h=c+f;d=b+d/2;f=c+f/2;a.beginPath();a.moveTo(b,f);a.bezierCurveTo(b,f-l,d-k,c,d,c);a.bezierCurveTo(d+k,c,g,f-l,g,f);a.bezierCurveTo(g,f+l,d+k,h,d,h);a.bezierCurveTo(d-k,h,b,f+l,b,f);1==e&&a.fill();a.stroke()}function C(){d.strokeStyle=k;d.lineCap="round";d.lineWidth=""+l;var a=1;2<f.length&&(a=parseFloat(f[2]));if(0<=a&&(u(m(0),n(parseFloat(f[0])),m(0),n(parseFloat(f[1]))),d.fillStyle=k,0!=a))for(var b=a*parseInt((parseFloat(f[0])-1)/a);b<parseFloat(f[1]);b+=
a)d.beginPath(),d.moveTo(m(0)+10,n(b)),d.lineTo(m(0)-10,n(b)),0!=b&&d.fillText(""+b,m(0)+20,n(b)+20),d.stroke()}var c=b.split(":");if("grid"==c[0].trim().toLowerCase()){v=c[1].split(",");if(1<v.length&&1<g){var t=parseFloat(v[0]);var q=parseFloat(v[1]);if(0<t)for(b=t*parseInt(parseFloat(e[0])/t);b<parseFloat(e[1]);b+=t)if(0!=b||0==b&&3==f.length&&0>parseFloat(f[2]))d.strokeStyle=k,d.lineWidth=l,d.beginPath(),d.moveTo(m(b),n(parseFloat(f[0]))),d.lineTo(m(b),n(parseFloat(f[1]))),d.stroke();if(0<q)for(b=
q*parseInt(parseFloat(f[0])/q);b<parseFloat(f[1]);b+=q)if(0!=b||0==b&&3==e.length&&0>parseFloat(e[2]))d.strokeStyle=k,d.lineWidth=l,d.beginPath(),d.moveTo(m(parseFloat(e[0])),n(b)),d.lineTo(m(parseFloat(e[1])),n(b)),d.stroke();b=k;c=l;k=h;l=B;w();C();k=b;l=c}return""}if("fontsize"==c[0].trim())d.font=c[1].trim()+"px Sans-Serif";else if("arrow"==c[0].trim())c=c[1].split(","),4==c.length&&(d.fillStyle=k,d.lineWidth=l,u(m(parseFloat(c[0])),n(parseFloat(c[1])),m(parseFloat(c[2])),n(parseFloat(c[3]))));
else if("polygon"==c[0].trim()){if(c=c[1].split(","),0<c.length){q=!0;t="";var r=c.length;0==r%2&&(q=!1,r--);1==q&&(t=c[c.length-1]);d.beginPath();d.moveTo(m(parseFloat(c[0])),n(parseFloat(c[1])));for(b=2;b<r;b+=2)d.lineTo(m(parseFloat(c[b])),n(parseFloat(c[b+1])));1==q&&(d.fillStyle=t,d.fill());d.strokeStyle=k;d.lineWidth=l;d.stroke()}}else if("pen"==c[0].trim().toLowerCase())c=c[1].split(","),0<c.length&&(k=c[0]),1<c.length&&(l=parseFloat(c[1])),3<c.length&&d.setLineDash([parseInt(c[2]),parseInt(c[3])]);
else{if("xaxis"==c[0].trim().toLowerCase())return e=c[1].split(","),3==e.length&&(parseFloat(e[1])<parseFloat(e[0])&&(b=e[0],e[0]=e[1],e[1]=b),g++,2==g&&(w(),C(),h=k,B=l)),"";if("yaxis"==c[0].trim().toLowerCase())return f=c[1].split(","),3==f.length&&(parseFloat(f[1])<parseFloat(f[0])&&(b=f[0],f[0]=f[1],f[1]=b),g++,2==g&&(w(),C(),h=k,B=l)),"";if("ratio"==c[0].trim().toLowerCase())return 1<c.length&&(p=c[1].split(","),z.width=2E3,z.height=2E3*parseFloat(p[1])/parseFloat(p[0]),d.clearRect(0,0,z.width,
z.height),A=[z.width,z.height],d.font="40px Sans-Serif",d.setLineDash([])),"";if("line"==c[0].trim().toLowerCase())c=c[1].split(","),3<c.length&&(d.strokeStyle=k,d.lineWidth=l,d.beginPath(),d.moveTo(m(parseFloat(c[0])),n(parseFloat(c[1]))),d.lineTo(m(parseFloat(c[2])),n(parseFloat(c[3]))),d.stroke());else if("circle"==c[0].trim().toLowerCase())c=c[1].split(","),2<c.length&&(d.strokeStyle=k,d.lineWidth=l,b=parseFloat(c[0]),t=parseFloat(c[1]),r=parseFloat(c[2]),d.beginPath(),q=!1,4==c.length&&(d.fillStyle=
c[3],q=!0),x(d,m(b),n(t),2*(m(r)-m(0)),2*(n(0)-n(r)),q));else if("fill"==c[0].trim().toLowerCase()){if(c=c[1].split(","),3<c.length)for(b=parseFloat(c[2]),q=parseFloat(c[3]),t=nerdamer(c[0].trim()).buildFunction(),c=nerdamer(c[1].trim()).buildFunction();b<q;b+=(parseFloat(e[1])-parseFloat(e[0]))/A[0])d.beginPath(),d.lineWidth=1,d.strokeStyle=k,d.moveTo(m(b),n(t(b))),d.lineTo(m(b),n(c(b))),d.stroke()}else if("point"==c[0].trim().toLowerCase())c=c[1].split(","),q=t=0,2<c.length&&(d.beginPath(),d.fillStyle=
k,0<parseInt(c[2])&&d.fillRect(m(parseFloat(c[0]))-parseInt(c[2]),n(parseFloat(c[1]))-parseInt(c[2]),parseInt(2*c[2]+1),parseInt(2*c[2]+1))),3<c.length&&(t=2*parseInt(c[2]),q=parseInt(c[2])),5<c.length&&(t=parseInt(c[4]),q=parseInt(c[5])),3<c.length&&d.fillText(c[3],m(parseFloat(c[0]))+t,n(parseFloat(c[1]))+q);else if("function"==c[0].trim().toLowerCase()){b=parseFloat(e[0]);q=parseFloat(e[1]);c=c[1].split(",");2<c.length&&(b=parseFloat(c[1]),q=parseFloat(c[2]));if(0<c.length){t=[];r=nerdamer(c[0].trim()).buildFunction();
xax0=parseFloat(e[0]);xax1=parseFloat(e[1]);yax0=parseFloat(f[0]);yax1=parseFloat(f[1]);c=0;var y=!1;for(t.push([]);b<q;b+=(xax1-xax0)/A[0])r(b)<=yax1&&r(b)>=yax0?(t[c].push(new a(m(b),n(r(b)))),y=!0):(1==y&&(c++,t.push([])),y=!1);for(c=0;c<t.length;c++)for(q=QreatorBezier.holeBezier(t[c],.1),b=0;b<q.length;b++)r=q[b],1===r.length?(d.beginPath(),d.fillStyle=k,d.fillRect(r[0].x,r[0].y,1,1)):4===r.length&&(d.beginPath(),d.moveTo(r[0].x,r[0].y),d.strokeStyle=k,d.lineCap="round",d.lineWidth=""+l,d.bezierCurveTo(r[1].x,
r[1].y,r[2].x,r[2].y,r[3].x,r[3].y),d.stroke())}return"Funktion gefunden"}}});b=$("#plotcanvas")[0].toDataURL();$("#plotcanvas").remove();return"\n\n++++\n<img  style='margin-left:auto; margin-right:auto;display:block' src='"+b+"' width='600px'  ></img>\n++++\n"});res=res.replace(/\$\$(.|\n)*?\$\$/g,function(a){return-1!=a.substring(2,a.length-2).indexOf("\n")?"Hex11 "+b(a.substring(2,a.length-2))+" Hex12":"Hex22 "+b(a.substring(2,a.length-2))+" Hex23"});k=Opal.hash2(["header_footer","attributes"],
{header_footer:!1,attributes:["icons=font"]});res=Opal.Asciidoctor.$convert(res,k);res=res.replace(/Hex11(.)*?Hex12/g,function(a){return"\\["+g(a.substring(5,a.length-5).trim())+"\\]"});res=res.replace(/Hex22(.)*?Hex23/g,function(a){return"\\("+g(a.substring(5,a.length-5).trim())+"\\)"});res=res.replace(/\\\$(.|\n)*?\\\$/g,function(a){return-1!=a.substring(2,a.length-2).indexOf("\n")?"\\[ "+AMTparseAMtoTeX(a.substring(2,a.length-2))+" \\]":"\\( "+AMTparseAMtoTeX(a.substring(2,a.length-2))+" \\)"});
$(h).html(res);$(h).find("pre code").each(function(){Prism.highlightElement($(this)[0])});renderMathInElement($(h)[0],{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}]});return[]}function u(a){for(var b=a.length,e=0,f=0;f<b;f++){var k=a.charAt(f);"("!==k&&"["!==k||e++;")"!==k&&"]"!==k||e--;if(","===k&&!e)return[a.substr(0,f),a.substr(f+1,b)]}return[a,""]}function x(a){a=u(a.split(" ").join(""));var b=a[0],e={};a[1].split(",").map(function(a){a=
a.split("=");var b=a[0],f=a[1];nerdamer.validVarName(b)&&"undefined"!==typeof f&&(e[b]=a[1])});return[b,e]}function y(a,b,e,f){var g=x(a),k=g[0],g=g[1],h=/^([a-z_][a-z\d\_]*)\(([a-z_,\s]*)\):=(.+)$/gi.exec(k);if(h){b=h[1];e=h[2].split(",");k=nerdamer(h[3]).text();try{nerdamer.setFunction(b,e,k);var l=b+"("+e.map(function(a){return nerdamer(a).toTeX()}).join(",")+")="+nerdamer(k).toTeX();Object.keys(g);return 1==f?l.split("\n").join(""):a}catch(w){return a("Error: Could not set function: "+w.toString())}}else if(h=
/^([a-z_][a-z\d\_]*):(.+)$/gi.exec(k))try{var p=h[1],u=h[2];nerdamer.setVar(p,nerdamer(u).text());l=p+"="+nerdamer(u).toTeX();return 1==f?l.split("\n").join(""):a}catch(w){return a("Something went wrong. Nerdamer could not parse expression: "+w.toString())}else try{var v=nerdamer(nerdamer(k).text(),g);output=v.toString();1==b&&(v=v.evaluate());decimal=void 0;1==e&&(decimal="decimal");l=v.toTeX(decimal);return 1==f?l.split("\n").join(""):a}catch(w){return a("Something went wrong. Nerdamer could not parse expression: "+
w.toString())}}var E,D;this.zeigeMarkdown=function(a){$("#markdown").append("<div class='markdownText'><div id='ausgabeMarkdown'></div><div hidden id='originaltext' class='originaltext'></div></div>");a=$("#aktuellerText").val();p(a,"#ausgabeMarkdown");$("#originaltext").text(a);$("#originaltext").removeAttr("id");$("#ausgabeMarkdown").removeAttr("id");$("#markdownTable").remove();$(D).html("")};this.recalculate=function(a,b){a=p(a,b);console.log(a)};this.init=function(a,b,e){if(null==e||void 0==
e)e="";E=a;D=b;$(E).html("<table id='markdownTable' style='width:100%;'><tr><td valign='top' style='width:50%;'><textarea wrap='soft' style='width:100%;' id='aktuellerText'>"+e+"</textarea></td><td  style='width:50%; '><div id='htmlResult' class='adoccss'></div></td></tr></table>");$(D).append("<input id='livepreview' type='checkbox' checked>Live</input><button id='parseMarkdown' class='imagePreview'></button><button id='insertGraph' class='imageGraph'></button>");p(e,"#htmlResult");new Expanding($("#aktuellerText")[0]);
$("#aktuellerText").focus();$("#aktuellerText").on("keypress",function(a){if(1==$("#livepreview")[0].checked&&(13===a.keyCode||13==a.charCode||32==a.keyCode||32==a.charCode)){a=$("#aktuellerText").val();if(null==a||void 0==a)a="";p(a,"#htmlResult")}});$("#parseMarkdown").on("click",function(){var a=$("#aktuellerText").val();p(a,"#htmlResult")});$("#insertTable").on("click",function(){h("\n|===\n|Kopf Spalte 1|Kopf Spalte 2|Kopf Spalte 3\n\n|Text 1|Text 2|Text 3\n|Text 1|Text 2|Text 3\n|===\n","#aktuellerText");
$("#aktuellerText").focus()});$("#insertGraph").on("click",function(){h("\n!!\n!startx:-4.8\n!endex:5\n!starty:-1.8\n!endey:5\n!!\n!ppp\nratio:!!endex-startx!!,!!endey-starty!!\nxaxis:!!startx!!,!!endex!!,1\nyaxis:!!starty!!,!!endey!!,1 \npen:#ccccff,4 \ngrid:0.5,0.5\npen:blue,10,0,0 \nfunction:x^2 \npen:red,10,20,20\nfunction:2x\npen:black,10,0,0\npoint:1,2,15\n!ppp\n","#aktuellerText");$("#aktuellerText").focus()})}};
