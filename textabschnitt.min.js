var Textabschnitt=new function(){function d(b){for(var c="",a=0;a<b.length;a++)var g="00"+b.charCodeAt(a).toString(16),c=c+g.substr(g.length-2);return c}function h(b){for(var c="",a=0;a<b.length;a+=2)c+=String.fromCharCode(parseInt(b.substr(a,2),16));return c}function e(b,c){b=b.replace(/\$\$\$(.|\n)*?\$\$\$/g,function(a){return-1!=a.substring(3,a.length-3).indexOf("\n")?"Hex11 "+d(AMTparseAMtoTeX(a.substring(3,a.length-3)))+"Hex12":"Hex22 "+d(AMTparseAMtoTeX(a.substring(3,a.length-3)))+" Hex23"});
b=b.replace(/\$\$(.|\n)*?\$\$/g,function(a){return-1!=a.substring(2,a.length-2).indexOf("\n")?"Hex11 "+d(a.substring(2,a.length-2))+" Hex12":"Hex22 "+d(a.substring(2,a.length-2))+" Hex23"});b=Opal.Asciidoctor.$convert(b);b=b.replace(/Hex11(.)*?Hex12/g,function(a){return"\\["+h(a.substring(5,a.length-5).trim())+"\\]"});b=b.replace(/Hex22(.)*?Hex23/g,function(a){return"\\("+h(a.substring(5,a.length-5).trim())+"\\)"});b=b.replace(/\\\$(.|\n)*?\\\$/g,function(a){return-1!=a.substring(2,a.length-2).indexOf("\n")?
"\\[ "+AMTparseAMtoTeX(a.substring(2,a.length-2))+" \\]":"\\( "+AMTparseAMtoTeX(a.substring(2,a.length-2))+" \\)"});$(c).html(b);renderMathInElement($(c)[0],{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}]})}var k,f;this.zeigeMarkdown=function(b){$("#markdown").append("<div class='markdownText'><div id='ausgabeMarkdown'></div><div hidden id='originaltext' class='originaltext'></div></div>");b=$("#aktuellerText").val();e(b,"#ausgabeMarkdown");
$("#originaltext").text(b);$("#originaltext").removeAttr("id");$("#ausgabeMarkdown").removeAttr("id");$("#markdownTable").remove();$(f).html("")};this.init=function(b,c,a){null==a&&(a="");k=b;f=c;$(k).html("<table id='markdownTable' style='width:100%;'><tr><td valign='top' style='width:50%;'><textarea wrap='soft' style='width:100%;' id='aktuellerText'>"+a+"</textarea></td><td  style='width:50%; '><div id='htmlResult' class='adoccss'></div></td></tr></table>");$(f).append("<button id='parseMarkdown' class='imagePreview'></button><input id='livepreview' type='checkbox' checked>Live</input>");
e(a,"#htmlResult");new Expanding($("#aktuellerText")[0]);$("#aktuellerText").on("keypress",function(a){1!=$("#livepreview")[0].checked||13!==a.keyCode&&13!=a.charCode&&32!=a.keyCode&&32!=a.charCode||(a=$("#aktuellerText").val(),e(a,"#htmlResult"))});$("#parseMarkdown").on("click",function(){var a=$("#aktuellerText").val();e(a,"#htmlResult")});$("#erstelleTabelle").on("click",function(){var a=$("#aktuellerText").prop("selectionStart"),b=$("#aktuellerText").prop("selectionEnd"),c=$("#aktuellerText").val(),
d=c.substring(0,a),e=c.substring(b,c.length),a=c.substring(a,b);$("#aktuellerText").val(d+"<span style='background-color: #ffff00'>"+a+"</span>"+e)})}};
